---
layout: mypost
title: Struts2学习笔记02 配置文件
categories: [java]
---

# struts配置

```xml
<struts>
    <constant name="struts.i18n.encoding" value="UTF-8"></constant>
    <package name="testdemo" extends="struts-default" namespace="/">
        <action name="test" class="com.day01.Test">
        	<result name="ok">/test.jsp</result>
        </action>
    </package>
</struts>
```

## package标签

类似java的包，用于区分不同的action。必须先写package标签才能配置action

1. name属性和功能无关，起个名字而已。但是多个package的name值不同

2. extends属性，表示一种继承。值是固定的，即struts-default。表示里面的配置具有action的功能

3. namespace属性。url访问路径的前缀，和action的name构成访问路径。可以不写，默认值是/

## action标签

主要是配置action的访问路径

1. name属性，访问路径。可以配置多个action，但name值不同

2. class属性，action类的路径

3. method属性，配置默认执行的方法。一般action默认执行execute方法

# result标签

根据action的返回值跳到不同的页面/action。如果是页面，需要加上/，表示WebContent的根目录

1. name属性，用于对比action的返回值

2. type属性，跳转的方式，重定向/转发...，默认是转发操作

|已配置结果类型名|类名|描述|
| ------------- |:-------------:| -----:|
|dispatcher|org.apache.struts2.dispatcher.ServletDispatcherResult|默认结果类型，用来呈现JSP页面|
|chain|com.opensymphony.xwork2.ActionChainResult|将action和另外一个action链接起来|
|freemarker|org.apache.struts2.views.freemarker.FreemarkerResult|呈现Freemarker模板|
|httpheader|org.apache.struts2.dispatcher.HttpHeaderResult|返回一个已配置好的HTTP头信息响应|
|redirect|org.apache.struts2.dispatcher.ServletRedirectResult|将用户重定向到一个已配置好的URL|
|redirectAction|org.apache.struts2.dispatcher.ServletActionRedirectResult|将用户重定向到一个已定义好的action|
|stream|org.apache.struts2.dispatcher.StreamResult|将原始数据作为流传递回浏览器端，该结果类型对下载的内容和图片非常有用|
|velocity|org.apache.struts2.dispatcher.VelocityResult|呈现Velocity模板|
|xslt|org.apache.struts2.views.xslt.XSLTResult|呈现XML到浏览器，该XML可以通过XSL模板进行转换|
|plaintext |org.apache.struts2.dispatcher.PlainTextResult|返回普通文本|

## 常量配置

`<constant name="" value=""></constant>`

name的值来自/org/apache/struts2/default.properties

还有两种配置方式两种方式(1)在src下面建立struts.properties文件(2)在webxml进行配置。
不过这两种不常用

# 分模块开发的配置

为了防止多人对同一个配置文件的修改，可以在核心配置里面引入用户配置，然后每个人修改自己的配置即可。

```xml
<!-- 路径的根是src -->
<struts>
	<include file=""></include>	
</struts>
```


